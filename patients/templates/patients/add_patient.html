{% extends "patients/_base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
  <h3 class="heading-title text-warning">
    <i class="fa fa-warning"></i> Important Note
  </h3>
  <p>
    You are going to add a new patient to the system. The information for the
    patient has been auto populated from the report <strong>#{{ report_id }}</strong>.
    Kindly the review the information as diligently as possible and before
    adding the patient to the system.
  </p>
  <p>
    The following things will be affected once the patient is added to the system:
  </p>
  <ul>
    <li>Patient counts</li>
    <li>State wise distribution</li>
    <li>Spread Cluster Map</li>
  </ul>

  <div class="alert alert-info">
    <strong>
      <i class="fa fa-info-circle"></i>
      If you are sure the information is valid, but seems very similar to patient already
      in the database, then just mark the information verified. An admin will double check
      and add the patient to the system.
    </strong>
  </div>

  <hr />

  <h3 class="heading-title">Add New Patient</h3>

  <form class="form-horizontal mt-4" method="POST">
    {% crispy form form.helper %}
    {{ sformset.management_form }}
    {% for sform in sformset %}
      {% crispy sform %}
    {% endfor %}

    <div class="form-group">
      <input type="submit" name="submit" value="Add new Patient" class="btn btn-primary" id="submit-id-submit">
      <input type="submit" name="mark_verified" value="Mark Report Verified" class="btn btn-primary btn-default float-right" id="submit-id-mark_verified">
    </div>
  </form>


{% endblock %}

{% block JS %}
  <script src="{% static "patients/js/plugins/bootstrap-datepicker.min.js" %}"></script>
  <script>
    $('.datepicker').datepicker({
      startDate: '-1d',
      format: "dd/MM/yyyy"
    });
  </script>
{% endblock %}
